---
title: "Lotofácil"
subtitle: "Explorando os números da Lotofácil"
date: "2022-06-XX"
categories: [R, loteria, lotofácil]
image: "logo.png"
draft: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE)
```

## 1. A história da Lotofácil

A Lotofácil é uma das loterias mais populares do Brasil, sendo introduzida em 2003 pela Caixa Econômica Federal. Ela foi criada com o objetivo de oferecer aos jogadores uma modalidade mais acessível e com maiores chances de ganhar. 

De 25 números, 15 são sorteados. 15 também são os números escolhidos pelos jogadores. Ganham o valor máximo aqueles que acertarem todos os números sorteados. 


### 1.1. Breve visão geral dos tópicos a serem abordados.

Aqui vamos explorar os dados da Lotofácil, mostrando os números que mais saíram em seus sorteios, além de explorar um pouco a ideia de distribuição uniforme.


## 2. Pacotes utilizados na sessão

```{r}
library(dplyr)
library(ggplot2)
library(janitor)
library(knitr)
library(readr)
library(tidyr)
```


## 3. Carregando os dados

Por primeiro, carregando os dados e limpando os nomes das variáveis:

```{r}
lotofacil <- read_csv(here::here("posts/008-lotofacil/lotofacil.csv")) |> 
	clean_names()
```


Abaixo mostro como os dados estão organizados, somente com as 6 primeiras observações:

```{r}
kable(arrange(tail(lotofacil), concurso))
```


Pensei em algumas coisas interessantes de se mostrar.

- Quais os 15 números que mais foram sorteados?

```{r}
#| echo: false
lf_long <- lotofacil |> 
	pivot_longer(cols = c(bola_1:bola_15), names_to = "ordem", values_to = "numero")

todos <- lf_long |> 
	group_by(numero) |> 
	tally()
```


```{r}
#| echo: false
ggplot(data = todos, aes(x = numero, y = n)) +
	geom_col(position = position_dodge2(), 
			 fill = ifelse(todos$numero %in% head(order(desc(todos$n)), 15),"#A2CDF1", "white"), 
			 alpha = 0.8) +
	scale_x_continuous(breaks = 1:25) +
	scale_y_continuous(breaks = seq(0, 1750, 250)) +
	geom_text(aes(y = n, label = n), vjust = 1.5, size = 2) +
	labs(x = "Número",
		 y = "Frequência de saída") +
	theme_dark() +
	theme(panel.background = element_rect(fill = "black"),
		  plot.background = element_rect(fill = "black"),
		  axis.title = element_text(color = "#FFF461", face = "bold", size = 14),
		  axis.text = element_text(color = "#FFF461", size = 10),
		  axis.line = element_line(color = "yellow"),
		  panel.grid.minor = element_blank(),
		  panel.grid.major.x = element_blank())
```


Como mostra o gráfico acima, e o banco de dados abaixo, o número mais sorteado foi o **20**, aparecendo 1.774 vezes. E o 15° número mais sorteado foi o **2**, aparecendo 1.693 vezes.


```{r}
todos |> 
	arrange(desc(n)) |> 
	head(n = 15) |> 
	kable()

todos |> 
	arrange(desc(n)) |> 
	head(n = 15) |> 
	arrange(n)

```



```{r}




themeB <- function() {
	theme(panel.background = element_rect(fill = "black"),
		  plot.background = element_rect(fill = "black"),
		  axis.title = element_text(color = "#FFF461", face = "bold", size = 14),
		  axis.text = element_text(color = "#FFF461", size = 10),
		  axis.line = element_line(color = "yellow"),
		  panel.grid.minor = element_blank(),
		  panel.grid.major.x = element_blank())
}



numeros <- lf_long |> 
	group_by(ordem, numero) |> 
	tally()

ggplot(data = numeros, aes(x = ordem, y = n, group = numero)) +
	geom_col(position = position_dodge2(),
			 fill = "#A2CDF1",
			 alpha = 0.8) +
	themeB() +
	facet_wrap(~numero)


numeros |> 
	arrange(desc(n)) |> 
	slice_max(order_by = ordem, with_ties = FALSE)

numeros |> 
	arrange(desc(n)) |> View()
	
```


Falar da teoria da probabilidade de numeros grandes - distribuição uniforme


## Finishing


